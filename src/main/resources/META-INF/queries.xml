<?xml version="1.0" encoding="UTF-8" ?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm
        http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd" version="2.1">

    <named-query name="Group.findByName">
        <query>
            <![CDATA[
            select g from Group g where g.name = :name
        ]]>
        </query>
    </named-query>

    <named-query name="User.findByName">
        <query>
            <![CDATA[
            select u from User u where u.name = :name
        ]]>
        </query>
    </named-query>

    <named-query name="Book.findByISBN">
        <query>
            <![CDATA[
            select b from Book b where b.isbn = :isbn
        ]]>
        </query>
    </named-query>

    <named-query name="Customer.findInfosByName">
        <query>
            <![CDATA[
            select NEW ch.bfh.eadj.bookstore.dto.CustomerInfo(c.id, c.number, c.firstName, c.name, c.email) from Customer c
            where LOWER(c.name) like CONCAT('%', CONCAT(LOWER(:name), '%'))
            or LOWER(c.firstName) like CONCAT('%', CONCAT(LOWER(:name), '%'))
        ]]>
        </query>
    </named-query>

</entity-mappings>